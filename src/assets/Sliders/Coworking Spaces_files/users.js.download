
// check exist mobile
$(document).on('change','#check-mobile',function(e){
    var mobile_no = $(this).val();
    $(":submit").attr("disabled", true);

    $.ajax({
        type: "GET",
        url: '/check-mobile/'+mobile_no,
        success:  function (data) {

        if(data==true){
            $('#check-mobile').val('');
            toastr.error('user with this mobile no. already exists.');

        }
        else{
            $(":submit").removeAttr("disabled");
        }
    }
    
});
});

// check exist email
$(document).on('change','#check-email',function(e){
    var email = $(this).val();
    $(":submit").attr("disabled", true);

    $.ajax({
        type: "GET",
        url: '/check-email/'+email,
        success:  function (data) {
        if(data==true){
            $('#check-email').val('');
            toastr.error('User with this email already exists.');
        }
        else{
            $(":submit").removeAttr("disabled");
        }
    }
    
});
});

// confirm password
$(document).on('change','.confirm-password',function(e){
    var confirm_password = $(this).val();
    var password = $('.password-check').val();

    if(confirm_password!==password){
        $('.confirm-password').val('');
        toastr.error('Password not Matching');
    }

});

// change password
$("#change-password-form").submit(function(e) {

    e.preventDefault();
    
    var form = $(this);
    var actionUrl = form.attr('action');
    
    $.ajax({
        type: "POST",
        url: actionUrl,
        data: form.serialize(),
        success: function(data){
            if(data==true){
                window.location.href = "/login";
            }else{
                toastr.error('Please ensure the information is correct');
            }
        }
    });
    
});
